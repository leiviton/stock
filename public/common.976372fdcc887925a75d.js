(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"Uo/Y":function(t,e,r){"use strict";r.d(e,"a",function(){return i});var o=r("t/Na"),s=r("AytR"),i=function(){function t(t,e,r,o){this.http=t,this.router=e,this.toast=r,this.loading=o,this.token=null,this.setAccessToken()}return t.prototype.request=function(){return this.http},t.prototype.setAccessToken=function(){this.token=localStorage.getItem("token"),this.header=new o.g({Authorization:"Bearer "+this.token,Accept:"application/json"})},t.prototype.builder=function(t){return this.url=s.a.server_url+"/api/v1/"+t,this},t.prototype.list=function(t){void 0===t&&(t={});var e=this.url;if(void 0!==t.filters){e+="?";var r=[];t.filters.forEach(function(t,o){var s=Object.keys(t)[0],i=t[s];r.push({field:i}),e=e+"where["+s+"]="+i+"&"});var o=this.http.get(e,{headers:this.header});return this.toPromise(o)}return o=this.http.get(e,{headers:this.header}),this.toPromise(o)},t.prototype.search=function(t){var e=this.http.get(this.url+"?value="+t,{headers:this.header});return this.toPromise(e)},t.prototype.view=function(t,e,r){void 0===r&&(r="");var o=this.http.get(this.url+e+"/"+t+r,{headers:this.header});return this.toPromise(o)},t.prototype.update=function(t,e){var r=this.http.put(this.url+"/"+t,e,{headers:this.header});return this.toPromise(r)},t.prototype.insert=function(t){var e=this.http.post(this.url,t,{headers:this.header});return this.toPromise(e)},t.prototype.delete=function(t){var e=this.http.delete(this.url+"/"+t,{headers:this.header});return this.toPromise(e)},t.prototype.toPromise=function(t){var e=this;return this.loading.show(),t.toPromise().then(function(t){return e.loading.hide(),t||{}}).catch(function(t){e.loading.hide();var r="Algo deu errado, informe o erro "+t.status+" ao administrador";switch(t.status){case 401:r="Voc\xea n\xe3o tem permiss\xe3o para acessar, informe um usuario e senha validos",localStorage.clear(),e.toast.error(r,"Erro"),e.router.navigate(["/login"]);break;case 403:e.toast.error(r=t.error.error_description,"Erro");break;case 500:e.toast.error(r,"Erro"),e.router.navigate(["/pages/error"]);break;case 422:e.bodyRequest=JSON.parse(t._body),e.toast.error(e.bodyRequest.message,e.bodyRequest.title);break;case 406:e.bodyRequest=t.error,e.toast.error(e.bodyRequest.message,e.bodyRequest.title)}})},t}()}}]);